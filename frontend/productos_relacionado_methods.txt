  // Métodos para búsqueda de producto relacionado (AGREGAR AL FINAL DE LA CLASE)
  
  buscarProductoRelacionado() {
    if (this.busquedaProductoRelacionado.length < 2) {
      this.productosRelacionadosFiltrados = [];
      return;
    }

    const busq = this.busquedaProductoRelacionado.toLowerCase();
    this.productosRelacionadosFiltrados = this.productos.filter(p => 
      p.nombre.toLowerCase().includes(busq) && p.id !== this.nuevoProducto.id
    ).slice(0, 10);  // Máximo 10 resultados
  }

  seleccionarProductoRelacionado(producto: any) {
    this.nuevoProducto.producto_relacionado_id = producto.id;
    this.busquedaProductoRelacionado = producto.nombre;
    this.productosRelacionadosFiltrados = [];
  }

  limpiarProductoRelacionado() {
    this.nuevoProducto.producto_relacionado_id = null;
    this.busquedaProductoRelacionado = '';
    this.productosRelacionadosFiltrados = [];
  }
